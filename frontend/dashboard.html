<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Dashboard de Produtividade - Pomodoro BoladÃ£o">
    <title>Dashboard - Pomodoro BoladÃ£o</title>
    
    <link rel="stylesheet" href="styles.css">
    <link rel="stylesheet" href="dashboard.css">
    <link rel="manifest" href="manifest.json">
    <link rel="icon" type="image/svg+xml" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>ğŸ“Š</text></svg>">
    
    <!-- Chart.js para grÃ¡ficos -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.min.js"></script>
</head>
<body>
    <div id="dashboardApp">
        <!-- Header -->
        <header class="dashboard-header">
            <div class="header-content">
                <h1>
                    <span class="emoji">ğŸ“Š</span>
                    Dashboard de Produtividade
                </h1>
                <div class="header-actions">
                    <a href="index.html" class="header-btn" title="Timer">
                        â±ï¸ <span class="header-btn-text">Timer</span>
                    </a>
                    <a href="ciclos.html" class="header-btn" title="Ciclos">
                        ğŸ”„ <span class="header-btn-text">Ciclos</span>
                    </a>
                    <button class="header-btn" id="exportBtn" title="Exportar Dados">
                        ğŸ“¤ <span class="header-btn-text">Exportar</span>
                    </button>
                    <button class="header-btn" id="backupBtn" title="Backup">
                        ğŸ’¾ <span class="header-btn-text">Backup</span>
                    </button>
                </div>
            </div>
        </header>

        <!-- Main Content -->
        <main class="dashboard-main">
            
            <!-- Filtros -->
            <section class="dashboard-filters">
                <div class="filter-group">
                    <label for="periodFilter">PerÃ­odo:</label>
                    <select id="periodFilter" class="filter-select">
                        <option value="week">Esta Semana</option>
                        <option value="month">Este MÃªs</option>
                        <option value="all">Todo PerÃ­odo</option>
                    </select>
                </div>
                <div class="filter-group">
                    <label for="subjectFilter">Disciplina:</label>
                    <select id="subjectFilter" class="filter-select">
                        <option value="all">Todas as Disciplinas</option>
                    </select>
                </div>
                <button class="btn-refresh" id="refreshBtn">ğŸ”„ Atualizar</button>
            </section>

            <!-- Cards de Resumo -->
            <section class="stats-cards">
                <div class="stat-card">
                    <div class="stat-icon">â±ï¸</div>
                    <div class="stat-content">
                        <div class="stat-value" id="totalHours">0h</div>
                        <div class="stat-label">Tempo Total de Estudo</div>
                    </div>
                </div>
                <div class="stat-card">
                    <div class="stat-icon">ğŸ…</div>
                    <div class="stat-content">
                        <div class="stat-value" id="totalSessions">0</div>
                        <div class="stat-label">SessÃµes Completadas</div>
                    </div>
                </div>
                <div class="stat-card">
                    <div class="stat-icon">ğŸ“š</div>
                    <div class="stat-content">
                        <div class="stat-value" id="totalSubjects">0</div>
                        <div class="stat-label">Disciplinas Estudadas</div>
                    </div>
                </div>
                <div class="stat-card">
                    <div class="stat-icon">ğŸ”¥</div>
                    <div class="stat-content">
                        <div class="stat-value" id="currentStreak">0</div>
                        <div class="stat-label">Dias Consecutivos</div>
                    </div>
                </div>
            </section>

            <!-- GrÃ¡fico de EvoluÃ§Ã£o -->
            <section class="dashboard-section">
                <div class="section-header">
                    <h2>ğŸ“ˆ EvoluÃ§Ã£o de Estudos</h2>
                    <div class="chart-controls">
                        <button class="chart-btn active" data-chart="daily">DiÃ¡rio</button>
                        <button class="chart-btn" data-chart="weekly">Semanal</button>
                        <button class="chart-btn" data-chart="monthly">Mensal</button>
                    </div>
                </div>
                <div class="chart-container">
                    <canvas id="evolutionChart"></canvas>
                </div>
            </section>

            <!-- GrÃ¡fico por Disciplina -->
            <section class="dashboard-section">
                <div class="section-header">
                    <h2>ğŸ“š DistribuiÃ§Ã£o por Disciplina</h2>
                </div>
                <div class="chart-container-row">
                    <div class="chart-container-half">
                        <canvas id="subjectPieChart"></canvas>
                    </div>
                    <div class="chart-container-half">
                        <canvas id="subjectBarChart"></canvas>
                    </div>
                </div>
            </section>

            <!-- Heatmap de Atividade -->
            <section class="dashboard-section">
                <div class="section-header">
                    <h2>ğŸ”¥ Heatmap de Atividade</h2>
                    <p class="section-subtitle">Visualize seus horÃ¡rios mais produtivos</p>
                </div>
                <div class="heatmap-container" id="heatmapContainer">
                    <div class="heatmap-loading">Carregando dados...</div>
                </div>
            </section>

            <!-- AnÃ¡lise de PadrÃµes -->
            <section class="dashboard-section">
                <div class="section-header">
                    <h2>ğŸ§  AnÃ¡lise de PadrÃµes</h2>
                    <p class="section-subtitle">Insights sobre seu comportamento de estudo</p>
                </div>
                <div class="patterns-grid">
                    <div class="pattern-card">
                        <div class="pattern-icon">ğŸŒ…</div>
                        <h3>Melhor HorÃ¡rio</h3>
                        <div class="pattern-value" id="bestTimeOfDay">--:--</div>
                        <p class="pattern-description" id="bestTimeDesc">Calculando...</p>
                    </div>
                    <div class="pattern-card">
                        <div class="pattern-icon">ğŸ“…</div>
                        <h3>Melhor Dia da Semana</h3>
                        <div class="pattern-value" id="bestDayOfWeek">---</div>
                        <p class="pattern-description" id="bestDayDesc">Calculando...</p>
                    </div>
                    <div class="pattern-card">
                        <div class="pattern-icon">â±ï¸</div>
                        <h3>DuraÃ§Ã£o MÃ©dia</h3>
                        <div class="pattern-value" id="avgSessionDuration">0 min</div>
                        <p class="pattern-description">Por sessÃ£o de foco</p>
                    </div>
                    <div class="pattern-card">
                        <div class="pattern-icon">ğŸ¯</div>
                        <h3>Taxa de ConclusÃ£o</h3>
                        <div class="pattern-value" id="completionRate">0%</div>
                        <p class="pattern-description">SessÃµes completadas</p>
                    </div>
                </div>
            </section>

            <!-- Ranking de Disciplinas -->
            <section class="dashboard-section">
                <div class="section-header">
                    <h2>ğŸ† Ranking de Disciplinas</h2>
                </div>
                <div class="ranking-container" id="rankingContainer">
                    <div class="ranking-loading">Carregando...</div>
                </div>
            </section>

        </main>
    </div>

    <!-- Modal de ExportaÃ§Ã£o -->
    <div class="modal" id="exportModal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>ğŸ“¤ Exportar Dados</h2>
                <button class="modal-close" id="closeExportModal">&times;</button>
            </div>
            <div class="modal-body">
                <p>Escolha o formato de exportaÃ§Ã£o:</p>
                <div class="export-options">
                    <button class="export-btn" id="exportCsvBtn">
                        <span class="export-icon">ğŸ“„</span>
                        <span>Exportar CSV</span>
                        <small>Dados em formato de planilha</small>
                    </button>
                    <button class="export-btn" id="exportJsonBtn">
                        <span class="export-icon">ğŸ“‹</span>
                        <span>Exportar JSON</span>
                        <small>Dados em formato estruturado</small>
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- Modal de Backup -->
    <div class="modal" id="backupModal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>ğŸ’¾ Backup do Banco de Dados</h2>
                <button class="modal-close" id="closeBackupModal">&times;</button>
            </div>
            <div class="modal-body">
                <div class="backup-section">
                    <h3>Fazer Backup</h3>
                    <p>Salve uma cÃ³pia do seu banco de dados localmente</p>
                    <button class="btn-primary" id="createBackupBtn">ğŸ’¾ Criar Backup</button>
                </div>
                <div class="backup-section">
                    <h3>Restaurar Backup</h3>
                    <p>Restaure seus dados de um backup anterior</p>
                    <input type="file" id="restoreBackupInput" accept=".db,.sqlite,.sqlite3" style="display: none;">
                    <button class="btn-secondary" id="restoreBackupBtn">ğŸ“‚ Restaurar do Arquivo</button>
                </div>
                <div class="backup-info">
                    <small>âš ï¸ AtenÃ§Ã£o: Restaurar um backup substituirÃ¡ todos os dados atuais.</small>
                </div>
            </div>
        </div>
    </div>

    <script type="module" src="js/dashboard.js"></script>
</body>
</html>
